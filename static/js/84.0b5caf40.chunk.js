"use strict";(self.webpackChunksite_use_like_vue=self.webpackChunksite_use_like_vue||[]).push([[84],{3084:(e,n,t)=>{t.r(n),t.d(n,{default:()=>a});var r=t(9950),s=t(7172),o=t(4414);const c=()=>{const[e,n]=(0,s.i)(r,{view:e=>{let{$VM:n,methods:t,refDOM:r}=e;return(0,o.jsxs)("div",{id:"demo",children:[(0,o.jsx)("h1",{children:n("message")}),(0,o.jsx)("input",{type:"text",size:"30",id:"message",name:"message",defaultValue:n("message"),onChange:e=>{t.changeInput(e.target.value)}}),(0,o.jsx)("button",{type:"button",onClick:t.getInput,children:"get input"})]})},methods:e=>{let{$VM:n,getMethods:t,memoBox:r,$DOM:s,nextTick:o}=e;return{changeInput:function(e){n("message").val(e)},getInput:function(){alert(n("message").now())}}},data:{message:"hello MVVM Component!"}});return(0,o.jsx)(o.Fragment,{children:e})},i=()=>{const[e,n]=(0,s.i)(r,{view:e=>{let{$VM:n,methods:t,refDOM:r}=e;return(0,o.jsxs)("div",{children:[(0,o.jsxs)("p",{children:[" \u55ae\u50f9: ",n("price")," "]}),(0,o.jsxs)("p",{children:[" \u6578\u91cf: ",n("quantity")," "]}),(0,o.jsxs)("p",{children:[" \u7e3d\u91d1\u984d\u5171 ",t.total()," \u5143 "]})]})},methods:e=>{let{$VM:n,getMethods:t,memoBox:r,$DOM:s,nextTick:o}=e;return{total:function(){return n("price").now()*n("quantity").now()}}},data:{price:100,quantity:10}});return(0,o.jsx)(o.Fragment,{children:e})},u=()=>{const[e,n]=(0,s.i)(r,{view:e=>{let{$VM:n,methods:t,refDOM:r}=e;return(0,o.jsxs)("div",{children:[(0,o.jsxs)("p",{children:["Count: ",n("count")]}),(0,o.jsx)("button",{onClick:t.plus,children:"+"}),"\xa0",(0,o.jsx)("button",{onClick:t.minus,children:"-"})]})},methods:e=>{let{$VM:n,getMethods:t,memoBox:r,$DOM:s,nextTick:o}=e;return{plus:function(){const e=n("count");e.val(e.now()+1,(()=>{alert("count now: "+e.now())}))},minus:function(){const e=n("count");e.val(e.now()-1)}}},data:{count:0}});return(0,o.jsx)(o.Fragment,{children:e})};function l(e){return document.createElement("div").appendChild(document.createTextNode(e)).parentNode.innerHTML}const a=function(){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom",children:[(0,o.jsx)("h1",{children:"React MVVM Component"}),(0,o.jsx)("div",{className:"btn-toolbar mb-2 mb-md-0",children:(0,o.jsxs)("div",{className:"me-2",children:[(0,o.jsx)("a",{href:"https://github.com/cid-chen/react-mvvm-component",target:"_blank",className:"btn btn-sm btn-outline-secondary",children:"View on GitHub"}),"\xa0",(0,o.jsx)("a",{href:"https://ko-fi.com/O4O21IE7IA",target:"_blank",children:(0,o.jsx)("img",{height:"34",style:{border:"0px",height:"34px"},src:"https://storage.ko-fi.com/cdn/kofi6.png?v=6",border:"0",alt:"Buy Me a Coffee at ko-fi.com"})})]})})]}),(0,o.jsx)("br",{}),(0,o.jsx)("h4",{children:"\u4e00\u6b3e\u80fd\u8b93\u4f60\u4f7f\u7528\u300c\u73fe\u4ee3\u5316MVVM\u67b6\u69cb\u300d\u52a0\u901f\u958b\u767cReact\u7684\u5916\u639b"}),(0,o.jsx)("br",{}),(0,o.jsx)("h5",{children:"\u8f15\u91cf6KB\u3001\u652f\u63f4React17~19\u3001\u53ef\u8207\u820a\u5c08\u6848\u53ca\u539f\u751f\u7d44\u4ef6\u7121\u75db\u6574\u5408\u3001\u9ad8\u53ef\u8b80\u6027\u3001\u53ef\u7dad\u8b77\u6027\u3001\u98a8\u683c\u512a\u96c5\u3001\u9ad8\u6548"}),(0,o.jsx)("br",{}),(0,o.jsxs)("table",{className:"table table-bordered",children:[(0,o.jsx)("thead",{children:(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{scope:"col"}),(0,o.jsx)("th",{scope:"col",children:"React"}),(0,o.jsx)("th",{scope:"col",children:"Vue"}),(0,o.jsx)("th",{scope:"col",children:"useRespectVue"})]})}),(0,o.jsxs)("tbody",{children:[(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{scope:"row",children:"\u96e3\u5ea6"}),(0,o.jsx)("td",{children:"\u904e\u9ad8"}),(0,o.jsx)("td",{children:"\u4e2d"}),(0,o.jsx)("td",{children:"\u4e2d"})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{scope:"row",children:"\u81ea\u7531\u5ea6"}),(0,o.jsx)("td",{children:"\u904e\u9ad8"}),(0,o.jsx)("td",{children:"\u4e2d\u4f4e"}),(0,o.jsx)("td",{children:"\u4e2d\u9ad8"})]}),(0,o.jsxs)("tr",{children:[(0,o.jsx)("th",{scope:"row",children:"\u7279\u8272"}),(0,o.jsxs)("td",{children:["\u6700\u5049\u5927\u7684\u524d\u7aef\u5eab\u4e4b\u4e00",(0,o.jsx)("br",{}),"Component & JSX"]}),(0,o.jsxs)("td",{children:["\u6700\u5049\u5927\u7684\u524d\u7aef\u6846\u67b6\u4e4b\u4e00",(0,o.jsx)("br",{}),"Option API & MVVM \u96d9\u5411\u7d81\u5b9a"]}),(0,o.jsxs)("td",{children:["\u81f4\u656c Vue \u7684 MVVM\u98a8\u683c React \u5916\u639b\u5957\u4ef6",(0,o.jsx)("br",{}),"MVVM Component \u6846\u67b6"]})]})]})]}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsx)("div",{className:"card",children:(0,o.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,o.jsx)("li",{className:"list-group-item",children:(0,o.jsx)(c,{})}),(0,o.jsx)("li",{className:"list-group-item",children:"MVVM Component \u96d9\u5411\u7d81\u5b9a\u7bc4\u4f8b"}),(0,o.jsx)("li",{className:"list-group-item",children:(0,o.jsx)("div",{children:(0,o.jsxs)("pre",{children:[(0,o.jsx)("div",{className:"hljs-label",children:"js"}),(0,o.jsx)("code",{className:"language-javascript",dangerouslySetInnerHTML:{__html:l("import ReactDOM from 'react-dom/client';\nimport React from 'react';\nimport { useRespectVue } from '@gratefuljs/react-mvvm-component';\n\nconst App = ()=>{\n  \n  const [MVVMComponent, VMmethodsAPI] = useRespectVue(React, { // Respect Vue's Option API\n    // View\n    view : ({$VM, methods, refDOM} /* view object APIs */) => ( \n      <div id=\"demo\">\n        <h1>{ $VM('message') }</h1>\n        \n        <input\n          type=\"text\"\n          size=\"30\"\n          id=\"message\"\n          name=\"message\"\n          defaultValue={ $VM('message') }\n          onChange={(e)=>{\n            methods.changeInput(e.target.value);\n          }} />\n\n        <button type=\"button\" onClick={methods.getInput}>get input</button>\n      </div>),\n    // ViewModel\n    methods : ({$VM, getMethods, memoBox, $DOM, nextTick} /* methods object APIs */) => ({ \n      changeInput : function(data){\n        \n        $VM('message').val(data); // Respect jQuery\n      },\n      getInput : function(){\n        \n        alert($VM('message').now());\n      },\n    }),\n    // Model\n    data : { \n      message : 'hello MVVM Component!',\n    },\n  });\n\n  return (<>{MVVMComponent}</>);\n};\n\n\nconst root = ReactDOM.createRoot(document.getElementById('app'));\nroot.render(<React.StrictMode>\n    <App />\n</React.StrictMode>);\n            ")}})]})})})]})}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsx)("h2",{className:"h2",children:"basic usage"}),(0,o.jsx)("div",{className:"card",children:(0,o.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,o.jsx)("li",{className:"list-group-item",children:(0,o.jsx)(i,{})}),(0,o.jsx)("li",{className:"list-group-item",children:"\u57fa\u790e\u7528\u6cd5\u7bc4\u4f8b"}),(0,o.jsx)("li",{className:"list-group-item",children:(0,o.jsx)("div",{children:(0,o.jsxs)("pre",{children:[(0,o.jsx)("div",{className:"hljs-label",children:"js"}),(0,o.jsx)("code",{className:"language-javascript",dangerouslySetInnerHTML:{__html:l("import ReactDOM from 'react-dom/client';\nimport React from 'react';\nimport { useRespectVue } from '@gratefuljs/react-mvvm-component';\n\nconst App = ()=>{\n  \n  const [MVVMComponent, VMmethodsAPI] = useRespectVue(React, {\n    view : ({$VM, methods, refDOM}) => (\n      <div>\n        <p> \u55ae\u50f9: { $VM('price') } </p>\n        <p> \u6578\u91cf: { $VM('quantity') } </p>\n        <p> \u7e3d\u91d1\u984d\u5171 { methods.total() } \u5143 </p>\n      </div>),\n    methods : ({$VM, getMethods, memoBox, $DOM, nextTick}) => ({\n      total: function() {\n\n        return $VM('price').now() * $VM('quantity').now();\n      },\n    }),\n    data : {\n      price: 100,\n      quantity: 10,\n    },\n  });\n\n  return (<>{MVVMComponent}</>);\n};\n\n\nconst root = ReactDOM.createRoot(document.getElementById('app'));\nroot.render(<React.StrictMode>\n    <App />\n</React.StrictMode>);\n            ")}})]})})})]})}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsx)("h2",{className:"h2",children:"basic event"}),(0,o.jsx)("div",{className:"card",children:(0,o.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,o.jsx)("li",{className:"list-group-item",children:(0,o.jsx)(u,{})}),(0,o.jsx)("li",{className:"list-group-item",children:"\u57fa\u790e\u4e8b\u4ef6\u7bc4\u4f8b"}),(0,o.jsx)("li",{className:"list-group-item",children:(0,o.jsx)("div",{children:(0,o.jsxs)("pre",{children:[(0,o.jsx)("div",{className:"hljs-label",children:"js"}),(0,o.jsx)("code",{className:"language-javascript",dangerouslySetInnerHTML:{__html:l("import ReactDOM from 'react-dom/client';\nimport React from 'react';\nimport { useRespectVue } from '@gratefuljs/react-mvvm-component';\n\nconst App = ()=>{\n  \n  const [MVVMComponent, VMmethodsAPI] = useRespectVue(React, {\n    view : ({$VM, methods, refDOM}) => (\n      <div>\n        <p>Count: { $VM('count') }</p>\n\n        <button onClick={methods.plus}>+</button>\n        &nbsp;\n        <button onClick={methods.minus}>-</button>\n      </div>),\n    methods : ({$VM, getMethods, memoBox, $DOM, nextTick}) => ({\n      plus : function(){\n\n        const cnt = $VM('count');\n\n        cnt.val(cnt.now()+1, ()=>{\n          \n          alert('count now: '+ cnt.now());\n        });\n      },\n      minus : function(){\n\n        const cnt = $VM('count');\n\n        cnt.val( cnt.now()-1 );\n      },\n    }),\n    data : {\n      count: 0,\n    },\n  });\n\n  return (<>{MVVMComponent}</>);\n};\n\n\nconst root = ReactDOM.createRoot(document.getElementById('app'));\nroot.render(<React.StrictMode>\n    <App />\n</React.StrictMode>);\n            ")}})]})})})]})})]})}},7172:(e,n,t)=>{t.d(n,{i:()=>O});const r={},s={},o="onViewWillMount",c="onViewMounted",i="onViewWillUpdate",u="onViewUpdated",l="onViewWillUnmount",a="onViewUnmounted",d="onDataChange",m="methods",h="view",p="mixins",x="computed",f="$VM",j="function",M="object",g="nextTick",V="watch",v="init",w="paramErr1",y="memoBox",b="undefined",O=(e,n)=>{if(typeof e.version===b||e.version.split(".")[0]<17)return void console.error("params1 must be React and version >= 17 !");const{useState:t,useEffect:O,useRef:R,createRef:$,isValidElement:k}=e,N=R(0),P=R(!1);let C=Y(n.data);const[A,D]=t([null,C]),I=R(C),T=R(C);C=null;const[S,B]=t(null),_=R(!1),q=R(!1),E=R(!1),F=R(!1),U=R(null),H=R(null),J=(R({}),R("")),L=R(!1),W=(R(""),R({}),R({})),z=R(!1),X=R(null),G=(R({}),R({})),K=(R(),R(0));function Q(e,n){const t=Object.keys,r=typeof e;return e&&n&&r===M&&r===typeof n?t(e).length===t(n).length&&t(e).every((t=>Q(e[t],n[t]))):e===n}function Y(e){let n=Array.isArray(e)?[]:{};for(let t in e){let r=e[t];n[t]=typeof r===M&&null!==e?Y(r):r}return n}function Z(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const r=e=>{throw t+e};if(-1===n.indexOf("."))return e.hasOwnProperty(n)?e[n]:void r(n);const s=n.split("."),o=s.shift();if(e.hasOwnProperty(o))return t+=o+".",Z(e[o],s.join("."),t);r(o)}z.current={set:function(e,n){return W.current[e]=n,typeof W.current[e]!==b},get:function(e){return W.current[e]||!1},del:function(e){return delete W.current[e],typeof W.current[e]===b}};const ee=()=>{if(!1!==L.current){const e=L.current[J.current];let n;for(let t=0,r=e.length;t<r;t++){if(n=e.shift(),!0===F.current)return;typeof n===j&&n()}delete L.current[J.current],L.current=!1,J.current=""}},ne=(e,n)=>{const t=n,r=e[0];typeof r===j&&r(),t()},te=e=>{setTimeout((()=>{window.requestAnimationFrame((function(){setTimeout((()=>{e()}),0)}))}),0)},re=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(e){case v:(()=>{const[e,t]=n;console.error(`${e} error: "${t}" is not init in the data object !`)})();break;case"dom":(()=>{const e=n;console.error(`$DOM error: use DOM key "${e}" is not exist !`)})();break;case w:(()=>{const[e,t]=n;console.error(`${e} error: param ${t} must be function !`)})();break;case"jsx":(()=>{const e=n;console.error(`${e}: must be a valid react component(JSX) !`)})()}},se=function(e){return e(((t={})[f]=e=>{return(t={}).key=e,t.val=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};if(E.current)return;let s=()=>{};const o=this.key;typeof t===j?(s=()=>(t(),!0),typeof n[d]===j&&n[d](((n,t)=>{if(typeof t===j){if("*"!==n)try{let r,s,c=!0;if(r=e,s=T.current[o],!T.current.hasOwnProperty(o))throw n;n==o&&!0===c&&!1===Q(r,s)&&t(r,s)}catch(e){re(v,[V,n]),isToCompare=!1}}else re(w,[V,"2"])}),U.current),!0===_.current&&n.hasOwnProperty(i)&&n[i](U.current,r),D((n=>{const[t,r]=n,c={ref:null};new Promise((e=>{e(Promise.resolve((()=>new Promise((e=>{window.requestAnimationFrame((function(){e()}))})))))})).then((e=>new Promise((n=>{setTimeout((()=>{n(e)}),0)})).then((e=>(Promise.resolve((e=>e)).then((e=>Promise.resolve(e()))),()=>{T.current=c.ref}))))).then((e=>{e()}));let i=(e=>{let n=e;return Array.isArray(e)?n=[...e]:typeof e===M&&(n={...e}),n})(r),u=o;return c.ref=i,c.ref[u]=e,[s,{...i}]}))):re(w,[`${f}.val`,"2"])},t.update=function(e){let n;return e&&(n=e()),this},t.now=function(){const e=this.key;let n={...I.current};try{let t=n[e];return n=Array.isArray(t)||typeof t===M?Y(t):JSON.parse(JSON.stringify(t)),n}catch(n){return re(v,[f,e]),null}},t.then=function(e){e&&e()},t;var t},t[y]=z.current,t.getMethods=()=>U.current,t.$DOM=e=>!0!==G.current.hasOwnProperty(e)?(re("dom",e),null):G.current[e].current,t[g]=e=>{typeof e===j?(""===J.current&&(J.current=(.001*window.crypto.getRandomValues(new Uint8Array(1))).toString(36).slice(2,7)),!1===L.current&&(L.current=[],L.current[J.current]=[]),L.current[J.current].push(e)):re(w,[g,"1"])},t.eventBus=r,t.batchUpdate=function(){},t.globalBox=s,t));var t};if(null===U.current){if(U.current={},n.hasOwnProperty(m)){if(typeof n[m]!==j)return void re(w,[m,"1"]);let e=n[m];U.current=se(e),e=null}n.hasOwnProperty(p),U.current.unmountView=()=>{!1===F.current&&(F.current=!0,E.current=!0,n.hasOwnProperty(l)&&n[l](U.current,r),D(!1),B(null))}}return null===X.current&&(X.current={},n.hasOwnProperty(x)),null===H.current&&(H.current={},n.hasOwnProperty(p)),O((()=>{!1!==A?(I.current=Y(A[1]),((e,t,r,s)=>{const o=n=>{if("*"===n)return e;try{return Z(e,n)}catch(e){return re(v,[f,e]),null}},c=e=>(!0===G.current.hasOwnProperty(e)||(G.current[e]=$()),G.current[e]),i=n[h]((e=>(e[f]=o,e[m]=t,e.refDOM=c,e[x]=r,e[y]=z.current,e.components=s,e))({}));!0===k(i)?B(i):re("jsx",h)})(A[1],U.current,X.current,H.current)):B(null)}),[A]),O((()=>{!0===q.current&&!0!==F.current&&te((()=>{((e,t,s)=>{const o=e;!0!==F.current&&(n.hasOwnProperty(u)&&n[u](U.current,r),o(t,s))})(ne,A,ee)}))}),[A]),O((()=>{if(!0!==F.current){if(!0===_.current&&!1===q.current)te((()=>{setTimeout((()=>{n.hasOwnProperty(c)&&n[c](U.current,r)}),0)})),q.current=!0;else if(!0===q.current&&P.current&&2==N.current)return void(N.current=3);!1===_.current&&null===S&&(n.hasOwnProperty(o)&&n[o](U.current,r),_.current=!0)}else te((()=>{n.hasOwnProperty(a)&&n[a](U.current,r),I.current=null,U.current=null}))}),[S]),O((()=>{N.current++,N.current>1&&(P.current=!0)}),[]),O((()=>()=>{setTimeout((()=>{window.requestAnimationFrame((function(){setTimeout((()=>{P.current&&K.current++,1!=K.current&&(E.current=!0,n.hasOwnProperty(l)&&n[l](U.current,r),F.current=!0,setTimeout((()=>{n.hasOwnProperty(a)&&n[a](U.current,r)}),0))}),0)}))}),0)}),[]),[S,U.current,r]}}}]);