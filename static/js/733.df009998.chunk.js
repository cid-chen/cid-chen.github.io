"use strict";(self.webpackChunksite_use_like_vue=self.webpackChunksite_use_like_vue||[]).push([[733],{9733:(e,t,n)=>{n.r(t),n.d(t,{default:()=>l});var r=n(9950),o=n(927),s=n(4414);const c=()=>{const[e,t]=(0,o.i)(r,{view:e=>{let{$VM:t,methods:n,refDOM:r}=e;return(0,s.jsxs)("div",{id:"demo",children:[(0,s.jsx)("h1",{children:t("message")}),(0,s.jsx)("input",{type:"text",size:"30",id:"message",name:"message",defaultValue:t("message"),onChange:e=>{n.changeInput(e.target.value)}}),(0,s.jsx)("button",{type:"button",onClick:n.getInput,children:"get input"})]})},methods:e=>{let{$VM:t,getMethods:n,memoBox:r,$DOM:o,nextTick:s}=e;return{changeInput:function(e){t("message").val(e)},getInput:function(){alert(t("message").now())}}},data:{message:"hello MVVM Component!"}});return(0,s.jsx)(s.Fragment,{children:e})},i=()=>{const[e,t]=(0,o.i)(r,{view:e=>{let{$VM:t,methods:n,refDOM:r}=e;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{children:[" price: ",t("price")," "]}),(0,s.jsxs)("p",{children:[" quantity: ",t("quantity")," "]}),(0,s.jsxs)("p",{children:[" total: ",n.total()," "]})]})},methods:e=>{let{$VM:t,getMethods:n,memoBox:r,$DOM:o,nextTick:s}=e;return{total:function(){return t("price").now()*t("quantity").now()}}},data:{price:100,quantity:10}});return(0,s.jsx)(s.Fragment,{children:e})},u=()=>{const[e,t]=(0,o.i)(r,{view:e=>{let{$VM:t,methods:n,refDOM:r}=e;return(0,s.jsxs)("div",{children:[(0,s.jsxs)("p",{children:["Count: ",t("count")]}),(0,s.jsx)("button",{onClick:n.plus,children:"+"}),"\xa0",(0,s.jsx)("button",{onClick:n.minus,children:"-"})]})},methods:e=>{let{$VM:t,getMethods:n,memoBox:r,$DOM:o,nextTick:s}=e;return{plus:function(){const e=t("count");e.val(e.now()+1,(()=>{alert("count now: "+e.now())}))},minus:function(){const e=t("count");e.val(e.now()-1)}}},data:{count:0}});return(0,s.jsx)(s.Fragment,{children:e})};function a(e){return document.createElement("div").appendChild(document.createTextNode(e)).parentNode.innerHTML}const l=function(){return(0,s.jsxs)(s.Fragment,{children:[(0,s.jsxs)("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom",children:[(0,s.jsx)("h1",{children:"React MVVM Component"}),(0,s.jsx)("div",{className:"btn-toolbar mb-2 mb-md-0",children:(0,s.jsxs)("div",{className:"me-2",children:[(0,s.jsx)("a",{href:"https://github.com/cid-chen/react-mvvm-component",target:"_blank",className:"btn btn-sm btn-outline-secondary",children:"View on GitHub"}),"\xa0",(0,s.jsx)("a",{href:"https://ko-fi.com/O4O21IE7IA",target:"_blank",children:(0,s.jsx)("img",{height:"34",style:{border:"0px",height:"34px"},src:"https://storage.ko-fi.com/cdn/kofi6.png?v=6",border:"0",alt:"Buy Me a Coffee at ko-fi.com"})})]})})]}),(0,s.jsx)("br",{}),(0,s.jsx)("h4",{children:'A new hook plugin to "manage local state" in React.'}),(0,s.jsx)("br",{}),(0,s.jsx)("h5",{children:"Frustrated with complex state logic or debugging hooks and effects?"}),(0,s.jsx)("br",{}),(0,s.jsxs)("h5",{children:['This tool brings a clearly and more intuitive way to handle "in-component state". ',(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),"Lightweight 6KB, supports React 17\u201319 and seamlessly compatible with existing components!"]}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,s.jsx)("li",{className:"list-group-item",children:(0,s.jsx)(c,{})}),(0,s.jsx)("li",{className:"list-group-item",children:"2 way binding."}),(0,s.jsx)("li",{className:"list-group-item",children:(0,s.jsx)("div",{children:(0,s.jsxs)("pre",{children:[(0,s.jsx)("div",{className:"hljs-label",children:"js"}),(0,s.jsx)("code",{className:"language-javascript",dangerouslySetInnerHTML:{__html:a("import ReactDOM from 'react-dom/client';\nimport React from 'react';\nimport { useRespectVue } from '@gratefuljs/react-mvvm-component';\n\nconst App = ()=>{ // The MVVM component is still a React function component !\n  \n  const [MVVMComponent, VMmethodsAPI] = useRespectVue(React, { // Respect Vue's Option API\n    // View\n    view : ({$VM, methods, refDOM} /* view object APIs */) => ( \n      <div id=\"demo\">\n        <h1>{ $VM('message') }</h1>\n        \n        <input\n          type=\"text\"\n          size=\"30\"\n          id=\"message\"\n          name=\"message\"\n          defaultValue={ $VM('message') }\n          onChange={(e)=>{\n            methods.changeInput(e.target.value);\n          }} />\n\n        <button type=\"button\" onClick={methods.getInput}>get input</button>\n      </div>),\n    // ViewModel\n    methods : ({$VM, getMethods, memoBox, $DOM, nextTick} /* methods object APIs */) => ({ \n      changeInput : function(data){\n        \n        $VM('message').val(data); // Respect jQuery\n      },\n      getInput : function(){\n        \n        alert($VM('message').now());\n      },\n    }),\n    // Model\n    data : { \n      message : 'hello MVVM Component!',\n    },\n  });\n\n  return (<>{MVVMComponent}</>);\n};\n\n\nconst root = ReactDOM.createRoot(document.getElementById('app'));\nroot.render(<React.StrictMode>\n    <App />\n</React.StrictMode>);\n            ")}})]})})})]})}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("h2",{className:"h2",children:"basic usage"}),(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,s.jsx)("li",{className:"list-group-item",children:(0,s.jsx)(i,{})}),(0,s.jsx)("li",{className:"list-group-item",children:"Basic usage."}),(0,s.jsx)("li",{className:"list-group-item",children:(0,s.jsx)("div",{children:(0,s.jsxs)("pre",{children:[(0,s.jsx)("div",{className:"hljs-label",children:"js"}),(0,s.jsx)("code",{className:"language-javascript",dangerouslySetInnerHTML:{__html:a("import ReactDOM from 'react-dom/client';\nimport React from 'react';\nimport { useRespectVue } from '@gratefuljs/react-mvvm-component';\n\nconst App = ()=>{\n  \n  const [MVVMComponent, VMmethodsAPI] = useRespectVue(React, {\n    view : ({$VM, methods, refDOM}) => (\n      <div>\n        <p> price: { $VM('price') } </p>\n        <p> quantity: { $VM('quantity') } </p>\n        <p> total: { methods.total() } </p>\n      </div>),\n    methods : ({$VM, getMethods, memoBox, $DOM, nextTick}) => ({\n      total: function() {\n\n        return $VM('price').now() * $VM('quantity').now();\n      },\n    }),\n    data : {\n      price: 100,\n      quantity: 10,\n    },\n  });\n\n  return (<>{MVVMComponent}</>);\n};\n\n\nconst root = ReactDOM.createRoot(document.getElementById('app'));\nroot.render(<React.StrictMode>\n    <App />\n</React.StrictMode>);\n            ")}})]})})})]})}),(0,s.jsx)("br",{}),(0,s.jsx)("br",{}),(0,s.jsx)("h2",{className:"h2",children:"basic event"}),(0,s.jsx)("div",{className:"card",children:(0,s.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,s.jsx)("li",{className:"list-group-item",children:(0,s.jsx)(u,{})}),(0,s.jsx)("li",{className:"list-group-item",children:"Basic event."}),(0,s.jsx)("li",{className:"list-group-item",children:(0,s.jsx)("div",{children:(0,s.jsxs)("pre",{children:[(0,s.jsx)("div",{className:"hljs-label",children:"js"}),(0,s.jsx)("code",{className:"language-javascript",dangerouslySetInnerHTML:{__html:a("import ReactDOM from 'react-dom/client';\nimport React from 'react';\nimport { useRespectVue } from '@gratefuljs/react-mvvm-component';\n\nconst App = ()=>{\n  \n  const [MVVMComponent, VMmethodsAPI] = useRespectVue(React, {\n    view : ({$VM, methods, refDOM}) => (\n      <div>\n        <p>Count: { $VM('count') }</p>\n\n        <button onClick={methods.plus}>+</button>\n        &nbsp;\n        <button onClick={methods.minus}>-</button>\n      </div>),\n    methods : ({$VM, getMethods, memoBox, $DOM, nextTick}) => ({\n      plus : function(){\n\n        const cnt = $VM('count');\n\n        cnt.val(cnt.now()+1, ()=>{\n          \n          alert('count now: '+ cnt.now());\n        });\n      },\n      minus : function(){\n\n        const cnt = $VM('count');\n\n        cnt.val( cnt.now()-1 );\n      },\n    }),\n    data : {\n      count: 0,\n    },\n  });\n\n  return (<>{MVVMComponent}</>);\n};\n\n\nconst root = ReactDOM.createRoot(document.getElementById('app'));\nroot.render(<React.StrictMode>\n    <App />\n</React.StrictMode>);\n            ")}})]})})})]})})]})}},927:(e,t,n)=>{n.d(t,{i:()=>O});const r={},o={},s="onViewWillMount",c="onViewMounted",i="onViewWillUpdate",u="onViewUpdated",a="onViewWillUnmount",l="onViewUnmounted",m="onDataChange",d="methods",p="view",h="mixins",f="computed",g="$VM",x="function",j="object",M="nextTick",w="watch",y="init",v="paramErr1",V="memoBox",b="undefined",O=(e,t)=>{if(typeof e.version===b||e.version.split(".")[0]<17)return void console.error("params1 must be React and version >= 17 !");const{useState:n,useEffect:O,useRef:$,createRef:R,isValidElement:k}=e,N=$(0),P=$(!1);let C=Y(t.data);const[A,D]=n([null,C]),I=$(C),T=$(C);C=null;const[B,S]=n(null),_=$(!1),q=$(!1),E=$(!1),F=$(!1),U=$(null),H=$(null),L=($({}),$("")),J=$(!1),W=($(""),$({}),$({})),z=$(!1),G=$(null),K=($({}),$({})),Q=($(),$(0));function X(e,t){const n=Object.keys,r=typeof e;return e&&t&&r===j&&r===typeof t?n(e).length===n(t).length&&n(e).every((n=>X(e[n],t[n]))):e===t}function Y(e){let t=Array.isArray(e)?[]:{};for(let n in e){let r=e[n];t[n]=typeof r===j&&null!==e?Y(r):r}return t}function Z(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const r=e=>{throw n+e};if(-1===t.indexOf("."))return e.hasOwnProperty(t)?e[t]:void r(t);const o=t.split("."),s=o.shift();if(e.hasOwnProperty(s))return n+=s+".",Z(e[s],o.join("."),n);r(s)}z.current={set:function(e,t){return W.current[e]=t,typeof W.current[e]!==b},get:function(e){return W.current[e]||!1},del:function(e){return delete W.current[e],typeof W.current[e]===b}};const ee=()=>{if(!1!==J.current){const e=J.current[L.current];let t;for(let n=0,r=e.length;n<r;n++){if(t=e.shift(),!0===F.current)return;typeof t===x&&t()}delete J.current[L.current],J.current=!1,L.current=""}},te=(e,t)=>{const n=t,r=e[0];typeof r===x&&r(),n()},ne=e=>{setTimeout((()=>{window.requestAnimationFrame((function(){setTimeout((()=>{e()}),0)}))}),0)},re=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(e){case y:(()=>{const[e,n]=t;console.error(`${e} error: "${n}" is not init in the data object !`)})();break;case"dom":(()=>{const e=t;console.error(`$DOM error: use DOM key "${e}" is not exist !`)})();break;case v:(()=>{const[e,n]=t;console.error(`${e} error: param ${n} must be function !`)})();break;case"jsx":(()=>{const e=t;console.error(`${e}: must be a valid react component(JSX) !`)})()}},oe=function(e){return e(((n={})[g]=e=>{return(n={}).key=e,n.val=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};if(E.current)return;let o=()=>{};const s=this.key;typeof n===x?(o=()=>(n(),!0),typeof t[m]===x&&t[m](((t,n)=>{if(typeof n===x){if("*"!==t)try{let r,o,c=!0;if(r=e,o=T.current[s],!T.current.hasOwnProperty(s))throw t;t==s&&!0===c&&!1===X(r,o)&&n(r,o)}catch(e){re(y,[w,t]),isToCompare=!1}}else re(v,[w,"2"])}),U.current),!0===_.current&&t.hasOwnProperty(i)&&t[i](U.current,r),D((t=>{const[n,r]=t,c={ref:null};new Promise((e=>{e(Promise.resolve((()=>new Promise((e=>{window.requestAnimationFrame((function(){e()}))})))))})).then((e=>new Promise((t=>{setTimeout((()=>{t(e)}),0)})).then((e=>(Promise.resolve((e=>e)).then((e=>Promise.resolve(e()))),()=>{T.current=c.ref}))))).then((e=>{e()}));let i=(e=>{let t=e;return Array.isArray(e)?t=[...e]:typeof e===j&&(t={...e}),t})(r),u=s;return c.ref=i,c.ref[u]=e,[o,{...i}]}))):re(v,[`${g}.val`,"2"])},n.update=function(e){let t;return e&&(t=e()),this},n.now=function(){const e=this.key;let t={...I.current};try{let n=t[e];return t=Array.isArray(n)||typeof n===j?Y(n):JSON.parse(JSON.stringify(n)),t}catch(t){return re(y,[g,e]),null}},n.then=function(e){e&&e()},n;var n},n[V]=z.current,n.getMethods=()=>U.current,n.$DOM=e=>!0!==K.current.hasOwnProperty(e)?(re("dom",e),null):K.current[e].current,n[M]=e=>{typeof e===x?(""===L.current&&(L.current=(.001*window.crypto.getRandomValues(new Uint8Array(1))).toString(36).slice(2,7)),!1===J.current&&(J.current=[],J.current[L.current]=[]),J.current[L.current].push(e)):re(v,[M,"1"])},n.eventBus=r,n.batchUpdate=function(){},n.globalBox=o,n));var n};if(null===U.current){if(U.current={},t.hasOwnProperty(d)){if(typeof t[d]!==x)return void re(v,[d,"1"]);let e=t[d];U.current=oe(e),e=null}t.hasOwnProperty(h),U.current.unmountView=()=>{!1===F.current&&(F.current=!0,E.current=!0,t.hasOwnProperty(a)&&t[a](U.current,r),D(!1),S(null))}}return null===G.current&&(G.current={},t.hasOwnProperty(f)),null===H.current&&(H.current={},t.hasOwnProperty(h)),O((()=>{!1!==A?(I.current=Y(A[1]),((e,n,r,o)=>{const s=t=>{if("*"===t)return e;try{return Z(e,t)}catch(e){return re(y,[g,e]),null}},c=e=>(!0===K.current.hasOwnProperty(e)||(K.current[e]=R()),K.current[e]),i=t[p]((e=>(e[g]=s,e[d]=n,e.refDOM=c,e[f]=r,e[V]=z.current,e.components=o,e))({}));!0===k(i)?S(i):re("jsx",p)})(A[1],U.current,G.current,H.current)):S(null)}),[A]),O((()=>{!0===q.current&&!0!==F.current&&ne((()=>{((e,n,o)=>{const s=e;!0!==F.current&&(t.hasOwnProperty(u)&&t[u](U.current,r),s(n,o))})(te,A,ee)}))}),[A]),O((()=>{if(!0!==F.current){if(!0===_.current&&!1===q.current)ne((()=>{setTimeout((()=>{t.hasOwnProperty(c)&&t[c](U.current,r)}),0)})),q.current=!0;else if(!0===q.current&&P.current&&2==N.current)return void(N.current=3);!1===_.current&&null===B&&(t.hasOwnProperty(s)&&t[s](U.current,r),_.current=!0)}else ne((()=>{t.hasOwnProperty(l)&&t[l](U.current,r),I.current=null,U.current=null}))}),[B]),O((()=>{N.current++,N.current>1&&(P.current=!0)}),[]),O((()=>()=>{setTimeout((()=>{window.requestAnimationFrame((function(){setTimeout((()=>{P.current&&Q.current++,1!=Q.current&&(E.current=!0,t.hasOwnProperty(a)&&t[a](U.current,r),F.current=!0,setTimeout((()=>{t.hasOwnProperty(l)&&t[l](U.current,r)}),0))}),0)}))}),0)}),[]),[B,U.current,r]}}}]);