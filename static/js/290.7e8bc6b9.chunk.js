"use strict";(self.webpackChunksite_use_like_vue=self.webpackChunksite_use_like_vue||[]).push([[290],{290:(e,s,n)=>{n.r(s),n.d(s,{default:()=>r});var l=n(9950),a=n(4414);function t(e){return document.createElement("div").appendChild(document.createTextNode(e)).parentNode.innerHTML}const r=function(){return(0,l.useEffect)((()=>{const e=()=>{setTimeout((()=>{const e=window.location.hash.substring(1);if(""==e)return;const s=document.getElementById(e);s&&s.scrollIntoView({behavior:"smooth"})}),500)};return e(),window.addEventListener("hashchange",e),()=>{window.removeEventListener("hashchange",e)}})),(0,a.jsxs)(a.Fragment,{children:[(0,a.jsxs)("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom",children:[(0,a.jsx)("h1",{children:"APIs"}),(0,a.jsx)("div",{className:"btn-toolbar mb-2 mb-md-0",children:(0,a.jsxs)("div",{className:"me-2",children:[(0,a.jsx)("a",{href:"https://github.com/cid-chen/react-mvvm-component",target:"_blank",className:"btn btn-sm btn-outline-secondary",children:"View on GitHub"}),"\xa0",(0,a.jsx)("a",{href:"https://ko-fi.com/O4O21IE7IA",target:"_blank",children:(0,a.jsx)("img",{height:"34",style:{border:"0px",height:"34px"},src:"https://storage.ko-fi.com/cdn/kofi6.png?v=6",border:"0",alt:"Buy Me a Coffee at ko-fi.com"})})]})})]}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{className:"card",children:(0,a.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,a.jsx)("li",{className:"list-group-item",children:(0,a.jsx)("div",{children:(0,a.jsxs)("pre",{children:[(0,a.jsx)("div",{className:"hljs-label",children:"js"}),(0,a.jsx)("code",{className:"language-javascript",dangerouslySetInnerHTML:{__html:t("const [MVVMComponent, VMmethodsAPI] = useRespectVue(React, {\n    view : ({$VM, methods, refDOM} /* view object APIs */) => (\n      <div>\n        <div ref={refDOM('ele1')}>\n          { $VM('timestamp') }\n        </div>\n \n        <button ref={refDOM('btn1')} id=\"showTime\" onClick={methods.showTimestamp}>show timestamp</button>\n        <br/>\n        <button onClick={methods.domTrigger}>dom trigger</button>\n      </div>),\n    methods : ({$VM, getMethods, memoBox, $DOM, nextTick} /* methods object APIs */) => ({\n      showTimestamp : function(){\n \n        alert($DOM('ele1').innerHTML);\n      },\n      updateTimestamp : function(){\n \n        $VM('timestamp').val(new Date().getTime());\n      },\n      domTrigger : function(){\n \n        alert('DOM trigger the button: '+ $DOM('btn1').id);\n \n        $DOM('btn1').click();\n      },\n    }),\n    data : {\n      timestamp: 'timestamp here',\n    }\n  });\n            ")}})]})})}),(0,a.jsxs)("li",{className:"list-group-item",children:[(0,a.jsx)("h2",{id:"view_object"}),(0,a.jsx)("br",{}),(0,a.jsx)("h2",{className:"h2",children:"view object APIs : $VM, methods, refDOM"}),(0,a.jsx)("br",{}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"card-header",style:{background:"#333",color:"#fff",fontWeight:"700",fontFamily:"source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace"},children:"$VM(key: string): any | null"}),(0,a.jsx)("ul",{className:"list-group list-group-flush",children:(0,a.jsxs)("li",{className:"list-group-item",children:["\u8aaa\u660e: \u5728 view \u88e1\u9762\uff0c\u6e32\u67d3\u8207 ViewModel \u76f8\u5c0d\u61c9 key \u7684 data\u503c",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{children:(0,a.jsxs)("pre",{children:[(0,a.jsx)("div",{className:"hljs-label",children:"js"}),(0,a.jsx)("code",{className:"language-javascript",dangerouslySetInnerHTML:{__html:t("(<div>{ $VM('count') }</div>)\n\n(<div>{ JSON.stringify($VM('*')) }</div>) // show all for debug\n")}})]})})]})})]}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"card-header",style:{background:"#333",color:"#fff",fontWeight:"700",fontFamily:"source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace"},children:"methods: object"}),(0,a.jsx)("ul",{className:"list-group list-group-flush",children:(0,a.jsxs)("li",{className:"list-group-item",children:["\u8aaa\u660e: \u5728 view \u88e1\u9762\uff0c\u4f7f\u7528\u4f60\u81ea\u8a02\u7684 methods \u7269\u4ef6\u65b9\u6cd5",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{children:(0,a.jsxs)("pre",{children:[(0,a.jsx)("div",{className:"hljs-label",children:"js"}),(0,a.jsx)("code",{className:"language-javascript",dangerouslySetInnerHTML:{__html:t("(<button onClick={methods.showTimestamp /* \u4f7f\u7528 showTimestamp \u65b9\u6cd5 */}>show timestamp</button>)\n")}})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("pre",{children:[(0,a.jsx)("div",{className:"hljs-label",children:"js"}),(0,a.jsx)("code",{className:"language-javascript",dangerouslySetInnerHTML:{__html:t("methods : ({$VM, getMethods, memoBox, $DOM, nextTick}) => ({\n  showTimestamp : function(){ // \u81ea\u8a02 showTimestamp \u65b9\u6cd5\n\n    alert(888);\n  },\n")}})]})})]})})]}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"card-header",style:{background:"#333",color:"#fff",fontWeight:"700",fontFamily:"source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace"},children:"refDOM(key: string): object"}),(0,a.jsx)("ul",{className:"list-group list-group-flush",children:(0,a.jsxs)("li",{className:"list-group-item",children:["\u8aaa\u660e: \u5728 view \u88e1\u9762\uff0c\u5148\u8a2d\u7f6e\u6b32\u4f7f\u7528\u7684DOM\u53c3\u8003(\u7d81\u5b9a\u67d0key)\uff0c\u4ee5\u4fbf\u65bc methods \u5167\u4f7f\u7528",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{children:(0,a.jsxs)("pre",{children:[(0,a.jsx)("div",{className:"hljs-label",children:"js"}),(0,a.jsx)("code",{className:"language-javascript",dangerouslySetInnerHTML:{__html:t("(<div ref={refDOM('ele1')}>888</div>) // set in view\n")}})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("pre",{children:[(0,a.jsx)("div",{className:"hljs-label",children:"js"}),(0,a.jsx)("code",{className:"language-javascript",dangerouslySetInnerHTML:{__html:t("alert($DOM('ele1').innerHTML); // get in methods\n")}})]})})]})})]}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{})]}),(0,a.jsxs)("li",{className:"list-group-item",children:[(0,a.jsx)("h2",{id:"methods_object"}),(0,a.jsx)("br",{}),(0,a.jsx)("h2",{className:"h2",children:"methods object APIs : "}),(0,a.jsx)("h2",{className:"h2",children:"$VM, getMethods, memoBox, $DOM, nextTick"}),(0,a.jsx)("br",{}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"card-header",style:{background:"#333",color:"#fff",fontWeight:"700",fontFamily:"source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace"},children:["$VM(key: string): object",(0,a.jsx)("hr",{}),".val(setValue: any, callback?: function): void",(0,a.jsx)("hr",{}),".now(): any | null"]}),(0,a.jsx)("ul",{className:"list-group list-group-flush",children:(0,a.jsxs)("li",{className:"list-group-item",children:["\u8aaa\u660e: \u5728 methods \u88e1\u9762\uff0c\u8a2d\u7f6e/\u53d6\u5f97\u8207 ViewModel \u76f8\u5c0d\u61c9 key \u7684 data\u503c",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),"\u5c0f\u63d0\u793a: .val()\u7684\u6bcf\u6b21\u8abf\u7528\uff0c\u5982\u679c\u6709\u4efb\u4f55\u8cc7\u6599\u66f4\u65b0\uff0c\u8a72\u5143\u4ef6\u5c31\u6703\u9032\u884c\u4e00\u6b21re-render",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{children:(0,a.jsxs)("pre",{children:[(0,a.jsx)("div",{className:"hljs-label",children:"js"}),(0,a.jsx)("code",{className:"language-javascript",dangerouslySetInnerHTML:{__html:t("methods : ({$VM, getMethods, memoBox, $DOM, nextTick}) => ({\n  plus : function(){\n\n    const cnt = $VM('count');\n\n    cnt.val(cnt.now()+1, ()=>{\n      \n      alert('count now: '+ cnt.now());\n    });\n  },\n")}})]})})]})})]}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"card-header",style:{background:"#333",color:"#fff",fontWeight:"700",fontFamily:"source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace"},children:"getMethods(): object"}),(0,a.jsx)("ul",{className:"list-group list-group-flush",children:(0,a.jsxs)("li",{className:"list-group-item",children:["\u8aaa\u660e: \u5728 methods \u88e1\u9762\uff0c\u53d6\u7528 methods \u672c\u8eab\u7269\u4ef6\u7684\u65b9\u6cd5",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),"*** \u8b66\u544a: \u8acb\u4f7f\u7528 getMethods() \u800c\u4e0d\u662f 'this'; \u4f7f\u7528 'this' \u53ef\u80fd\u9020\u6210\u7121\u6cd5\u9810\u671f\u7684\u4efb\u4f55\u932f\u8aa4",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{children:(0,a.jsxs)("pre",{children:[(0,a.jsx)("div",{className:"hljs-label",children:"js"}),(0,a.jsx)("code",{className:"language-javascript",dangerouslySetInnerHTML:{__html:t("methods : ({$VM, getMethods, memoBox, $DOM, nextTick}) => ({\n  stepMsg : function(msg){\n\n    alert(msg);\n  },\n  updateSomething : function(){\n      \n    this.stepMsg('nextTick trigger!'); // X: it will cause unexpected errors!\n      \n    getMethods().stepMsg('nextTick trigger!'); // O: call self methods\n  },\n}),\n")}})]})})]})})]}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"card-header",style:{background:"#333",color:"#fff",fontWeight:"700",fontFamily:"source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace"},children:["memoBox: object",(0,a.jsx)("hr",{}),".set(key: string, setValue: any): boolean",(0,a.jsx)("hr",{}),".get(key: string): any | false",(0,a.jsx)("hr",{}),".del(key: string): boolean"]}),(0,a.jsx)("ul",{className:"list-group list-group-flush",children:(0,a.jsxs)("li",{className:"list-group-item",children:["\u8aaa\u660e: \u53ef\u5728\u5143\u4ef6\u91cd\u65b0\u6e32\u67d3(view update)\u9593\uff0c\u4f9d\u7136\u4fdd\u7559(\u5feb\u53d6) memo \u8cc7\u6599\u5728 methods \u88e1\u9762\uff0c\u4f9b\u5f8c\u7e8c\u4f7f\u7528",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),"\u5c0f\u63d0\u793a: memo \u8cc7\u6599\u6703\u96a8\u8457\u8a72\u4f7f\u7528\u5143\u4ef6\u7684\u751f\u547d\u9031\u671f\u7d50\u675f\u800c\u81ea\u884c\u92b7\u6bc0",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{children:(0,a.jsxs)("pre",{children:[(0,a.jsx)("div",{className:"hljs-label",children:"js"}),(0,a.jsx)("code",{className:"language-javascript",dangerouslySetInnerHTML:{__html:t("methods : ({$VM, getMethods, memoBox, $DOM, nextTick}) => ({\n  useKeepData : function(){\n\n    let cacheData1 = memoBox.get('cacheData1');\n    \n    if( cacheData1 === false ){\n        \n      cacheData1 = '1234567888';\n\n      memoBox.set('cacheData1', cacheData1); // keep data across re-renders\n    }\n\n    $VM('numbers').val(cacheData1);\n  },\n")}})]})})]})})]}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"card-header",style:{background:"#333",color:"#fff",fontWeight:"700",fontFamily:"source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace"},children:"$DOM(key: string): HTMLElement"}),(0,a.jsx)("ul",{className:"list-group list-group-flush",children:(0,a.jsxs)("li",{className:"list-group-item",children:["\u8aaa\u660e: \u5728 methods \u88e1\u9762\uff0c\u53ef\u53d6\u7528\u4e26\u64cd\u4f5c view \u5167\u5df2\u8a2d\u7f6e(\u7d81\u5b9a\u67d0key) \u7684 DOM \u7269\u4ef6",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),"DOM \u7269\u4ef6\u70ba HTMLElement: ",(0,a.jsx)("a",{target:"_blank",href:"https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement",children:"https://developer.mozilla.org/en-US/docs/Web/API/HTMLElement"}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{children:(0,a.jsxs)("pre",{children:[(0,a.jsx)("div",{className:"hljs-label",children:"js"}),(0,a.jsx)("code",{className:"language-javascript",dangerouslySetInnerHTML:{__html:t("(<div ref={refDOM('ele1')}>888</div>) // set in view\n")}})]})}),(0,a.jsx)("div",{children:(0,a.jsxs)("pre",{children:[(0,a.jsx)("div",{className:"hljs-label",children:"js"}),(0,a.jsx)("code",{className:"language-javascript",dangerouslySetInnerHTML:{__html:t("alert($DOM('ele1').innerHTML); // get in methods\n\n$DOM('ele1').innerHTML = '1234567888'; // change html content\n")}})]})})]})})]}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsxs)("div",{className:"card",children:[(0,a.jsx)("div",{className:"card-header",style:{background:"#333",color:"#fff",fontWeight:"700",fontFamily:"source-code-pro, Menlo, Monaco, Consolas, 'Courier New', monospace"},children:"nextTick(callback: function): void"}),(0,a.jsx)("ul",{className:"list-group list-group-flush",children:(0,a.jsxs)("li",{className:"list-group-item",children:["\u8aaa\u660e: \u5728 methods \u88e1\u9762\uff0c\u5148\u9810\u8a02\u4e00\u500b\u672a\u4f86\u4e8b\u4ef6callback\uff0c\u5728 onViewUpdated \u89f8\u767c\u4e4b\u5f8c\u624d\u6703\u89f8\u767c",(0,a.jsx)("br",{}),(0,a.jsx)("br",{}),(0,a.jsx)("div",{children:(0,a.jsxs)("pre",{children:[(0,a.jsx)("div",{className:"hljs-label",children:"js"}),(0,a.jsx)("code",{className:"language-javascript",dangerouslySetInnerHTML:{__html:t("methods : ({$VM, getMethods, memoBox, $DOM, nextTick}) => ({\n  stepMsg : (msg) => {\n\n    alert(msg);\n  },\n  updateSomething : () => {\n\n    nextTick(()=>{ // trigger after the onViewUpdated\n\n      getMethods().stepMsg('nextTick trigger!'); // call self methods\n    });\n\n    $VM('showText').val(new Date().getTime());\n  },\n")}})]})})]})})]})]})]})}),(0,a.jsx)("br",{}),(0,a.jsx)("br",{})]})}}}]);