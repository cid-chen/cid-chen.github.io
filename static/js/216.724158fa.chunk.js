"use strict";(self.webpackChunksite_use_like_vue=self.webpackChunksite_use_like_vue||[]).push([[216],{1216:(e,n,t)=>{t.r(n),t.d(n,{default:()=>a});var r=t(9950),s=t(927),o=t(4414);const u=()=>{const[e,n]=(0,s.i)(r,{view:e=>{let{$VM:n,methods:t,refDOM:r}=e;return(0,o.jsxs)("div",{children:["count: ",n("count"),(0,o.jsx)("br",{}),0==n("count")?(0,o.jsx)("div",{style:{backgroundColor:"yellow"},children:"\u627e\u5230\u4e26\u5f9e\u4e8b\u81ea\u5df1\u64c5\u9577\u71b1\u611b\u7684\u4e8b, \u8981\u6709\u4fe1\u5fc3, \u76f8\u4fe1\u597d\u4e8b\u6703\u767c\u751f"}):n("count")<3?(0,o.jsx)("div",{style:{backgroundColor:"greenyellow"},children:(0,o.jsx)("a",{target:"_blank",href:"https://www.youtube.com/watch?v=ZraoxMfhKNk",children:"\u5c31\u50cf\u7a2e\u6a39\u4e00\u6a23, \u4fe1\u5fc3\u4e0d\u53ea\u662f\u76f8\u4fe1\u6a39\u6703\u9577\u5927, \u66f4\u662f\u9858\u610f\u4ed8\u51fa\u6642\u9593\u8ddf\u52aa\u529b\u53bb\u7167\u9867\u5b83, \u8b93\u4fe1\u5ff5\u8b8a\u70ba\u73fe\u5be6"})}):(0,o.jsx)("div",{style:{backgroundColor:"red"},children:'\u4f60\u76f8\u4fe1\u55ce? \u8c9d\u591a\u82ac\u5728\u5e7e\u4e4e\u55aa\u5931\u807d\u529b\u7684\u60c5\u6cc1\u4e0b, \u5275\u4f5c\u51fa\u4e86"\u7b2c\u4e5d\u4ea4\u97ff\u66f2"!'}),(0,o.jsx)("button",{onClick:t.plus,children:"Plus"}),(0,o.jsx)("br",{}),(0,o.jsx)("button",{onClick:t.reset,children:"Reset"})]})},methods:e=>{let{$VM:n,getMethods:t,memoBox:r,$DOM:s,nextTick:o}=e;return{plus:function(){n("count").val(n("count").now()+1)},reset:function(){n("count").val(0)}}},data:{count:0}});return(0,o.jsx)(o.Fragment,{children:e})},c=()=>{const[e,n]=(0,s.i)(r,{view:e=>{let{$VM:n,methods:t,refDOM:r}=e;return(0,o.jsxs)("div",{children:["\u624b\u727d\u624b1\u6b652\u6b653\u6b654\u6b65\u671b\u8457\u5929",(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),"\u770b\u661f\u661f",n("numbers").map((e=>(0,o.jsxs)("span",{children:[e,"\u9846"]},e.toString()))),"\u9023\u6210\u7dda",(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),"\u80cc\u5c0d\u80cc\u9ed8\u9ed8\u8a31\u4e0b\u5fc3\u9858",(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),"\u770b\u9060\u65b9\u7684\u661f\u5982\u679c\u807d\u7684\u898b\u5b83\u4e00\u5b9a\u5be6\u73fe - \u661f\u6674",(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),"\u5411 \u5468\u6770\u502b \u81f4\u656c.",(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsx)("button",{onClick:t.add,children:"Add"}),(0,o.jsx)("br",{}),(0,o.jsx)("button",{onClick:t.minus,children:"Minus"})]})},methods:e=>{let{$VM:n,getMethods:t,memoBox:r,$DOM:s,nextTick:o}=e;return{add:function(){let e=r.get("toJoinNumber");!1===e&&(e=1),r.set("toJoinNumber",e+1);const t=n("numbers");t.val([...t.now(),e])},minus:function(){const e=n("numbers").now(),t=e.pop();r.set("toJoinNumber",t),n("numbers").val(e)}}},data:{numbers:[]}});return(0,o.jsx)(o.Fragment,{children:e})},i=()=>{const[e,n]=(0,s.i)(r,{view:e=>{let{$VM:n,methods:t,refDOM:r}=e;return(0,o.jsxs)("div",{children:["Edit :",(0,o.jsx)("input",{type:"text",defaultValue:n("message"),placeholder:"\u8acb\u52ff\u8d85\u904e2\u500b\u5b57",style:t.msgStyle(),onChange:e=>{t.inputChange(e.target.value)}})]})},methods:e=>{let{$VM:n,getMethods:t,memoBox:r,$DOM:s,nextTick:o}=e;return{inputChange:function(e){n("message").val(e)},isVaild:function(){return n("message").now().length<=2},msgStyle:function(){const e=t();return{border:e.isVaild()?"":"red solid 1px",color:e.isVaild()?"":"red"}}}},data:{message:""}});return(0,o.jsx)(o.Fragment,{children:e})};function l(e){return document.createElement("div").appendChild(document.createTextNode(e)).parentNode.innerHTML}const a=function(){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"d-flex justify-content-between flex-wrap flex-md-nowrap align-items-center pt-3 pb-2 mb-3 border-bottom",children:[(0,o.jsx)("h1",{children:"If / Loop / Render \u689d\u4ef6\u5224\u65b7\u53ca\u6e32\u67d3"}),(0,o.jsx)("div",{className:"btn-toolbar mb-2 mb-md-0",children:(0,o.jsxs)("div",{className:"me-2",children:[(0,o.jsx)("a",{href:"https://github.com/cid-chen/react-mvvm-component",target:"_blank",className:"btn btn-sm btn-outline-secondary",children:"View on GitHub"}),"\xa0",(0,o.jsx)("a",{href:"https://ko-fi.com/O4O21IE7IA",target:"_blank",children:(0,o.jsx)("img",{height:"34",style:{border:"0px",height:"34px"},src:"https://storage.ko-fi.com/cdn/kofi6.png?v=6",border:"0",alt:"Buy Me a Coffee at ko-fi.com"})})]})})]}),(0,o.jsx)("br",{}),(0,o.jsx)("h5",{children:"\u300c\u5143\u4ef6\u7684\u72c0\u614b\u7ba1\u7406\u8207 JSX\uff0c\u5de7\u5999\u878d\u5408\u3002\u300d"}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsx)("h2",{className:"h2",children:"if render"}),(0,o.jsx)("div",{className:"card",children:(0,o.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,o.jsx)("li",{className:"list-group-item",children:(0,o.jsx)(u,{})}),(0,o.jsx)("li",{className:"list-group-item",children:"IF\u689d\u4ef6\u6e32\u67d3\u7bc4\u4f8b"}),(0,o.jsx)("li",{className:"list-group-item",children:(0,o.jsx)("div",{children:(0,o.jsxs)("pre",{children:[(0,o.jsx)("div",{className:"hljs-label",children:"js"}),(0,o.jsx)("code",{className:"language-javascript",dangerouslySetInnerHTML:{__html:l("import React from 'react';\nimport { useRespectVue } from '@gratefuljs/react-mvvm-component';\n\nconst Example5_1 = ()=>{\n  \n  const [MVVMComponent, VMmethodsAPI] = useRespectVue(React, {\n    view : ({$VM, methods, refDOM}) => (\n      <div>\n        count: {$VM('count')}\n        <br/>\n        {(()=>{\n          if( $VM('count') == 0 ){\n \n            return (<div style={{backgroundColor: 'yellow'}}>\u627e\u5230\u4e26\u5f9e\u4e8b\u81ea\u5df1\u64c5\u9577\u71b1\u611b\u7684\u4e8b, \u8981\u6709\u4fe1\u5fc3, \u76f8\u4fe1\u597d\u4e8b\u6703\u767c\u751f</div>);\n \n          }else if( $VM('count') < 3 ){\n \n            return (<div style={{backgroundColor: 'greenyellow'}}>\n                <a target=\"_blank\" href=\"https://www.youtube.com/watch?v=ZraoxMfhKNk\">\n                  \u5c31\u50cf\u7a2e\u6a39\u4e00\u6a23, \u4fe1\u5fc3\u4e0d\u53ea\u662f\u76f8\u4fe1\u6a39\u6703\u9577\u5927, \u66f4\u662f\u9858\u610f\u4ed8\u51fa\u6642\u9593\u8ddf\u52aa\u529b\u53bb\u7167\u9867\u5b83, \u8b93\u4fe1\u5ff5\u8b8a\u70ba\u73fe\u5be6\n                </a>\n            </div>);\n \n          }else{\n \n            return (<div style={{backgroundColor: 'red'}}>\u4f60\u76f8\u4fe1\u55ce? \u8c9d\u591a\u82ac\u5728\u5e7e\u4e4e\u55aa\u5931\u807d\u529b\u7684\u60c5\u6cc1\u4e0b, \u5275\u4f5c\u51fa\u4e86\"\u7b2c\u4e5d\u4ea4\u97ff\u66f2\"!</div>);\n          }\n        })()}\n\n        <button onClick={methods.plus}>Plus</button>\n        <br/>\n        <button onClick={methods.reset}>Reset</button>\n      </div>),\n    methods : ({$VM, getMethods, memoBox, $DOM, nextTick}) => ({\n      plus : function(){\n\n        $VM('count').val( $VM('count').now()+1 );\n      },\n      reset : function(){\n\n        $VM('count').val(0);\n      },\n    }),\n    data : {\n      count: 0,\n    },\n  });\n\n  return (<>{MVVMComponent}</>);\n};\n            ")}})]})})})]})}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsx)("h2",{className:"h2",children:"loop render"}),(0,o.jsx)("div",{className:"card",children:(0,o.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,o.jsx)("li",{className:"list-group-item",children:(0,o.jsx)(c,{})}),(0,o.jsx)("li",{className:"list-group-item",children:"\u5faa\u74b0\u6e32\u67d3\u7d44\u4ef6\u7bc4\u4f8b"}),(0,o.jsx)("li",{className:"list-group-item",children:(0,o.jsx)("div",{children:(0,o.jsxs)("pre",{children:[(0,o.jsx)("div",{className:"hljs-label",children:"js"}),(0,o.jsx)("code",{className:"language-javascript",dangerouslySetInnerHTML:{__html:l("import React from 'react';\nimport { useRespectVue } from '@gratefuljs/react-mvvm-component';\n\nconst Example5_2 = ()=>{\n  \n  const [MVVMComponent, VMmethodsAPI] = useRespectVue(React, {\n    view : ({$VM, methods, refDOM}) => (\n      <div>\n        \u624b\u727d\u624b1\u6b652\u6b653\u6b654\u6b65\u671b\u8457\u5929\n        <br/><br/>\n        \n        \u770b\u661f\u661f{$VM('numbers').map((number) =>\n          <span key={number.toString()}>{ number }\u9846</span>\n        )}\u9023\u6210\u7dda\n        \n        <br/><br/>\n        \u80cc\u5c0d\u80cc\u9ed8\u9ed8\u8a31\u4e0b\u5fc3\u9858\n        <br/><br/>\n        \u770b\u9060\u65b9\u7684\u661f\u5982\u679c\u807d\u7684\u898b\u5b83\u4e00\u5b9a\u5be6\u73fe - \u661f\u6674\n        <br/><br/>\n        \u5411 \u5468\u6770\u502b \u81f4\u656c.\n        <br/><br/>\n        <button onClick={methods.add}>Add</button>\n        <br/>\n        <button onClick={methods.minus}>Minus</button>\n      </div>),\n    methods : ({$VM, getMethods, memoBox, $DOM, nextTick}) => ({\n      add : function(){\n\n        let toJoinNumber = memoBox.get('toJoinNumber');\n\n        if( toJoinNumber === false ){\n\n          toJoinNumber = 1;\n        }\n\n        memoBox.set('toJoinNumber', toJoinNumber+1); // \u5728\u6b64\u5143\u4ef6re-renders\u6642\uff0c\u4f9d\u7136\u80fd\u7dad\u6301\u8a72\u8cc7\u6599\u4e0d\u8b8a(cache)\n\n\n        const nums = $VM('numbers');\n\n        nums.val([...nums.now(), toJoinNumber]);\n      },\n      minus : function(){\n\n        const tmp = $VM('numbers').now();\n\n        const toJoinNumber = tmp.pop();\n\n        memoBox.set('toJoinNumber', toJoinNumber);\n\n        $VM('numbers').val( tmp );\n      },\n    }),\n    data : {\n      numbers: [],\n    },\n  });\n\n  return (<>{MVVMComponent}</>);\n};\n            ")}})]})})})]})}),(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),(0,o.jsx)("h2",{className:"h2",children:"style render"}),(0,o.jsx)("div",{className:"card",children:(0,o.jsxs)("ul",{className:"list-group list-group-flush",children:[(0,o.jsx)("li",{className:"list-group-item",children:(0,o.jsx)(i,{})}),(0,o.jsx)("li",{className:"list-group-item",children:"\u884c\u5167\u6a23\u5f0f\u7684\u689d\u4ef6\u5f0f\u6e32\u67d3"}),(0,o.jsx)("li",{className:"list-group-item",children:(0,o.jsx)("div",{children:(0,o.jsxs)("pre",{children:[(0,o.jsx)("div",{className:"hljs-label",children:"js"}),(0,o.jsx)("code",{className:"language-javascript",dangerouslySetInnerHTML:{__html:l("import React from 'react';\nimport { useRespectVue } from '@gratefuljs/react-mvvm-component';\n\nconst Example5_3 = ()=>{\n  \n  const [MVVMComponent, VMmethodsAPI] = useRespectVue(React, {\n    view : ({$VM, methods, refDOM}) => (\n      <div>\n        Edit :\n        <input\n          type=\"text\" \n          defaultValue={ $VM('message') }\n          placeholder=\"\u8acb\u52ff\u8d85\u904e2\u500b\u5b57\"\n          style={ methods.msgStyle() } \n          onChange={(e)=>{\n\n            methods.inputChange(e.target.value);\n          }} />\n      </div>),\n    methods : ({$VM, getMethods, memoBox, $DOM, nextTick}) => ({\n      inputChange : function(data){\n\n        $VM('message').val(data);\n      },\n      isVaild: function() {\n\n        return $VM('message').now().length <= 2;\n      },\n      msgStyle: function() {\n\n        const methods = getMethods(); // use methods\n\n        return {\n          'border': methods.isVaild() ? '' : 'red solid 1px',\n          'color': methods.isVaild() ? '' : 'red'\n        };\n      },\n    }),\n    data : {\n      message: '',\n    },\n  });\n\n  return (<>{MVVMComponent}</>);\n};\n            ")}})]})})})]})})]})}},927:(e,n,t)=>{t.d(n,{i:()=>N});const r={},s={},o="onViewWillMount",u="onViewMounted",c="onViewWillUpdate",i="onViewUpdated",l="onViewWillUnmount",a="onViewUnmounted",m="onDataChange",d="methods",h="view",p="mixins",f="computed",b="$VM",x="function",j="object",g="nextTick",v="watch",y="init",M="paramErr1",w="memoBox",V="undefined",N=(e,n)=>{if(typeof e.version===V||e.version.split(".")[0]<17)return void console.error("params1 must be React and version >= 17 !");const{useState:t,useEffect:N,useRef:k,createRef:$,isValidElement:O}=e,C=k(0),P=k(!1);let T=Q(n.data);const[R,_]=t([null,T]),D=k(T),J=k(T);T=null;const[A,S]=t(null),B=k(!1),E=k(!1),I=k(!1),F=k(!1),U=k(null),H=k(null),L=(k({}),k("")),q=k(!1),W=(k(""),k({}),k({})),K=k(!1),X=k(null),Z=(k({}),k({})),G=(k(),k(0));function z(e,n){const t=Object.keys,r=typeof e;return e&&n&&r===j&&r===typeof n?t(e).length===t(n).length&&t(e).every((t=>z(e[t],n[t]))):e===n}function Q(e){let n=Array.isArray(e)?[]:{};for(let t in e){let r=e[t];n[t]=typeof r===j&&null!==e?Q(r):r}return n}function Y(e,n){let t=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";const r=e=>{throw t+e};if(-1===n.indexOf("."))return e.hasOwnProperty(n)?e[n]:void r(n);const s=n.split("."),o=s.shift();if(e.hasOwnProperty(o))return t+=o+".",Y(e[o],s.join("."),t);r(o)}K.current={set:function(e,n){return W.current[e]=n,typeof W.current[e]!==V},get:function(e){return W.current[e]||!1},del:function(e){return delete W.current[e],typeof W.current[e]===V}};const ee=()=>{if(!1!==q.current){const e=q.current[L.current];let n;for(let t=0,r=e.length;t<r;t++){if(n=e.shift(),!0===F.current)return;typeof n===x&&n()}delete q.current[L.current],q.current=!1,L.current=""}},ne=(e,n)=>{const t=n,r=e[0];typeof r===x&&r(),t()},te=e=>{setTimeout((()=>{window.requestAnimationFrame((function(){setTimeout((()=>{e()}),0)}))}),0)},re=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;switch(e){case y:(()=>{const[e,t]=n;console.error(`${e} error: "${t}" is not init in the data object !`)})();break;case"dom":(()=>{const e=n;console.error(`$DOM error: use DOM key "${e}" is not exist !`)})();break;case M:(()=>{const[e,t]=n;console.error(`${e} error: param ${t} must be function !`)})();break;case"jsx":(()=>{const e=n;console.error(`${e}: must be a valid react component(JSX) !`)})()}},se=function(e){return e(((t={})[b]=e=>{return(t={}).key=e,t.val=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:()=>{};if(I.current)return;let s=()=>{};const o=this.key;typeof t===x?(s=()=>(t(),!0),typeof n[m]===x&&n[m](((n,t)=>{if(typeof t===x){if("*"!==n)try{let r,s,u=!0;if(r=e,s=J.current[o],!J.current.hasOwnProperty(o))throw n;n==o&&!0===u&&!1===z(r,s)&&t(r,s)}catch(e){re(y,[v,n]),isToCompare=!1}}else re(M,[v,"2"])}),U.current),!0===B.current&&n.hasOwnProperty(c)&&n[c](U.current,r),_((n=>{const[t,r]=n,u={ref:null};new Promise((e=>{e(Promise.resolve((()=>new Promise((e=>{window.requestAnimationFrame((function(){e()}))})))))})).then((e=>new Promise((n=>{setTimeout((()=>{n(e)}),0)})).then((e=>(Promise.resolve((e=>e)).then((e=>Promise.resolve(e()))),()=>{J.current=u.ref}))))).then((e=>{e()}));let c=(e=>{let n=e;return Array.isArray(e)?n=[...e]:typeof e===j&&(n={...e}),n})(r),i=o;return u.ref=c,u.ref[i]=e,[s,{...c}]}))):re(M,[`${b}.val`,"2"])},t.update=function(e){let n;return e&&(n=e()),this},t.now=function(){const e=this.key;let n={...D.current};try{let t=n[e];return n=Array.isArray(t)||typeof t===j?Q(t):JSON.parse(JSON.stringify(t)),n}catch(n){return re(y,[b,e]),null}},t.then=function(e){e&&e()},t;var t},t[w]=K.current,t.getMethods=()=>U.current,t.$DOM=e=>!0!==Z.current.hasOwnProperty(e)?(re("dom",e),null):Z.current[e].current,t[g]=e=>{typeof e===x?(""===L.current&&(L.current=(.001*window.crypto.getRandomValues(new Uint8Array(1))).toString(36).slice(2,7)),!1===q.current&&(q.current=[],q.current[L.current]=[]),q.current[L.current].push(e)):re(M,[g,"1"])},t.eventBus=r,t.batchUpdate=function(){},t.globalBox=s,t));var t};if(null===U.current){if(U.current={},n.hasOwnProperty(d)){if(typeof n[d]!==x)return void re(M,[d,"1"]);let e=n[d];U.current=se(e),e=null}n.hasOwnProperty(p),U.current.unmountView=()=>{!1===F.current&&(F.current=!0,I.current=!0,n.hasOwnProperty(l)&&n[l](U.current,r),_(!1),S(null))}}return null===X.current&&(X.current={},n.hasOwnProperty(f)),null===H.current&&(H.current={},n.hasOwnProperty(p)),N((()=>{!1!==R?(D.current=Q(R[1]),((e,t,r,s)=>{const o=n=>{if("*"===n)return e;try{return Y(e,n)}catch(e){return re(y,[b,e]),null}},u=e=>(!0===Z.current.hasOwnProperty(e)||(Z.current[e]=$()),Z.current[e]),c=n[h]((e=>(e[b]=o,e[d]=t,e.refDOM=u,e[f]=r,e[w]=K.current,e.components=s,e))({}));!0===O(c)?S(c):re("jsx",h)})(R[1],U.current,X.current,H.current)):S(null)}),[R]),N((()=>{!0===E.current&&!0!==F.current&&te((()=>{((e,t,s)=>{const o=e;!0!==F.current&&(n.hasOwnProperty(i)&&n[i](U.current,r),o(t,s))})(ne,R,ee)}))}),[R]),N((()=>{if(!0!==F.current){if(!0===B.current&&!1===E.current)te((()=>{setTimeout((()=>{n.hasOwnProperty(u)&&n[u](U.current,r)}),0)})),E.current=!0;else if(!0===E.current&&P.current&&2==C.current)return void(C.current=3);!1===B.current&&null===A&&(n.hasOwnProperty(o)&&n[o](U.current,r),B.current=!0)}else te((()=>{n.hasOwnProperty(a)&&n[a](U.current,r),D.current=null,U.current=null}))}),[A]),N((()=>{C.current++,C.current>1&&(P.current=!0)}),[]),N((()=>()=>{setTimeout((()=>{window.requestAnimationFrame((function(){setTimeout((()=>{P.current&&G.current++,1!=G.current&&(I.current=!0,n.hasOwnProperty(l)&&n[l](U.current,r),F.current=!0,setTimeout((()=>{n.hasOwnProperty(a)&&n[a](U.current,r)}),0))}),0)}))}),0)}),[]),[A,U.current,r]}}}]);